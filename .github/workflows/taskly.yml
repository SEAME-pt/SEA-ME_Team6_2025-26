name: Taskly Template

on:
  issue_comment:
    types: [created]

permissions:
  issues: write
  contents: read

jobs:
  post-template:
    runs-on: ubuntu-latest
    if: ${{ github.event.issue.pull_request == null && contains(github.event.comment.body, '/taskly') }}
    steps:
      - name: Post closure template
        uses: actions/github-script@v7
        with:
          script: |
            const lines = [
              '## âœ… Closure Summary',
              '',
              '**What was done**',
              '- ',
              '',
              '**How it was done (approach / steps)**',
              '- ',
              '',
              '**References**',
              '- Docs: ',
              '- Links: ',
            ];
            const body = lines.join('\n');

            await github.rest.issues.createComment({
              ...context.repo,
              issue_number: context.payload.issue.number,
              body
            });
